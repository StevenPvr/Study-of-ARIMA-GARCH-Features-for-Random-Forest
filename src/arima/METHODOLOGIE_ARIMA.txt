# MÉTHODOLOGIE - PIPELINE ARIMA

## Objectif
Extraction de résidus white noise pour modélisation GARCH via ARIMA(0,0,0).

## Décision de conception CRITIQUE
**Modèle**: ARIMA(0,0,0) avec constante uniquement
**Raison**: Pas de capacité de prévision - extraction de résidus démoyennisés
**Formule**: y_t = μ + ε_t (où ε_t sont les résidus pour GARCH)

## Pipeline (4 modules)

### 1. data_visualisation/
**Objectif**: Analyse exploratoire pré-modélisation
**Sorties**:
- Séries temporelles log returns
- Distribution (histogramme + Q-Q plot)
- ACF/PACF (autocorrélation)
- Tests stationnarité (ADF, KPSS, Zivot-Andrews)
- Décomposition saisonnière

**Output**: `plots/arima/data_visualization/*.png`

### 2. stationnarity_check/
**Objectif**: Tests formels de stationnarité
**Tests**:
- ADF (Augmented Dickey-Fuller)
- KPSS
- Zivot-Andrews (détection ruptures structurelles)
- Statistiques roulantes

**Output**: `results/data/stationarity_report.json`

### 3. training_arima/
**Objectif**: Entraînement ARIMA(0,0,0) sur TRAIN (80%)
**Configuration**:
- Ordre: (0,0,0) - Pas de AR, différenciation, MA
- Trend: 'c' (constante/intercept uniquement)
- Refit fréquence: 21 jours (≈1 mois trading)

**Outputs**:
- `results/arima/training/model.pkl`: Modèle entraîné
- `results/arima/training/metadata.json`: Métadonnées

### 4. evaluation_arima/
**Objectif**: Évaluation + génération dataset GARCH

**Workflow**:
1. **Rolling forecast** sur TEST
   - Walk-forward validation avec refit périodique
   - Métriques: MSE, RMSE, MAE

2. **Backtest full-series** (TRAIN uniquement)
   - Génération résidus walk-forward
   - **CRITIQUE**: `include_test=False` (anti-leakage)
   - Refit tous les 21 jours

3. **Diagnostics résidus**
   - Ljung-Box (autocorrélation)
   - Tests normalité (Jarque-Bera, Shapiro-Wilk, Anderson-Darling)
   - ACF/PACF

4. **Export GARCH dataset**
   - Combine returns bruts + résidus ARIMA
   - Labels train/test
   - Sauvegarde: `results/arima/outputs/dataset_garch.csv`

**Outputs**:
- `results/arima/evaluation/rolling_predictions.csv`
- `results/arima/evaluation/rolling_metrics.json`
- `results/arima/evaluation/ljungbox_residuals.json`
- `results/arima/outputs/dataset_garch.csv` (input GARCH)

## Safeguards Anti-Leakage
- Backtest full-series: TRAIN uniquement (pas de TEST)
- Walk-forward: jamais de données futures
- Refit périodique: données passées uniquement (t ≤ current)

## Constantes clés
- `ARIMA_DEFAULT_ORDER`: (0,0,0)
- `ARIMA_DEFAULT_REFIT_EVERY`: 21 jours
- `TRAIN_TEST_SPLIT_RATIO`: 0.8

## Exécution individuelle
```bash
python src/arima/data_visualisation/main.py
python src/arima/stationnarity_check/main.py
python src/arima/training_arima/main.py
python src/arima/evaluation_arima/main.py
```
